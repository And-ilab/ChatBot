{% extends 'base/layout.html' %}

{% block title %}–û–±—É—á–µ–Ω–∏–µ{% endblock %}

{% block content %}
{% load static %}

<div class="container d-flex flex-column align-items-center">
    <h1 class="my-4">–û–±—É—á–µ–Ω–∏–µ</h1>
    <div class="divider w-100 bg-secondary" style="height: 2px;"></div>

    <div class="w-75 mt-4 position-relative">
        <h4 class="mb-3">–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h4>
        <div class="d-flex align-items-center">
            <input type="text" id="train-input" class="form-control pe-5" value="{{ user_message.content }}" data-sender-id="{{ user_message.sender_id }}"
                   data-message-id="{{ user_message.id }}" readonly />
            <button class="btn btn-sm btn-outline-secondary ms-2 copy-btn"
                    type="button"
                    data-target="#train-input">
                <i class="fas fa-copy"></i>
            </button>
        </div>
    </div>

    {% if user_message.recognized_message %}
    <div class="w-75 mt-4 position-relative">
        <h4 class="mb-3">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å:</h4>
        <div class="d-flex align-items-center">
            <textarea class="form-control pe-5 auto-resize" id="recognized-message" rows="1" readonly style="resize: none;">{{ user_message.recognized_message }}</textarea>
            <button class="btn btn-sm btn-outline-secondary ms-2 copy-btn"
                    type="button"
                    data-target="#recognized-message">
                <i class="fas fa-copy"></i>
            </button>
        </div>
    </div>
    {% endif %}

    {% if user_message.neural_message %}
    <div class="w-75 mt-4 position-relative">
        <h4 class="mb-3">–û—Ç–≤–µ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏:</h4>
        <div class="d-flex align-items-center">
            <textarea class="form-control pe-5 auto-resize" id="neural-message" rows="1" readonly style="resize: none;">{{ user_message.neural_message }}</textarea>
            <button class="btn btn-sm btn-outline-secondary ms-2 copy-btn"
                    type="button"
                    data-target="#neural-message">
                <i class="fas fa-copy"></i>
            </button>
        </div>
    </div>
    {% endif %}

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="custom-tabs w-75 mt-4">
      <!-- –û–±—â–µ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
      <div class="w-100 mt-4">
        <h4 class="mb-3">–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</h4>
        <textarea id="admin-response" class="form-control" rows="10" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..." style="resize: none;"></textarea>
        <div class="position-relative d-inline-block mt-2">
          <button id="add-smiley" class="btn btn-sm btn-outline-secondary" type="button">
            –î–æ–±–∞–≤–∏—Ç—å —Å–º–∞–π–ª–∏–∫
          </button>
          <div id="smiley-dropdown" class="dropdown-menu p-2" style="position: absolute; top: 100%; left: 0; display: none; z-index: 10; width: 220px;">
            <div class="d-flex flex-wrap gap-2">
              <span class="smiley" style="cursor: pointer;">üòä</span>
              <span class="smiley" style="cursor: pointer;">üòé</span>
              <span class="smiley" style="cursor: pointer;">üòç</span>
              <span class="smiley" style="cursor: pointer;">ü§î</span>
              <span class="smiley" style="cursor: pointer;">üò°</span>
              <span class="smiley" style="cursor: pointer;">üòÇ</span>
              <span class="smiley" style="cursor: pointer;">üò¢</span>
              <span class="smiley" style="cursor: pointer;">üëç</span>
              <span class="smiley" style="cursor: pointer;">üëé</span>
              <span class="smiley" style="cursor: pointer;">‚ù§Ô∏è</span>
              <span class="smiley" style="cursor: pointer;">üî•</span>
              <span class="smiley" style="cursor: pointer;">üéâ</span>
              <span class="smiley" style="cursor: pointer;">üòê</span>
              <span class="smiley" style="cursor: pointer;">üòÖ</span>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ -->
      <div class="tab-buttons mt-4">
        <button class="tab-button active" data-tab="reply">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
        <button class="tab-button" data-tab="train">–û–±—É—á–∏—Ç—å</button>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
      <div class="tab-content">
        <!-- –í–∫–ª–∞–¥–∫–∞ "–û—Ç–≤–µ—Ç–∏—Ç—å" -->
        <div id="reply" class="tab-pane active">
          <div class="mt-3 mb-3 w-100">
            <button id="reply-btn" class="btn btn-primary">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
          </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ "–û–±—É—á–∏—Ç—å" -->
        <div id="train" class="tab-pane">
          <div class="mt-3">
            <label class="form-check-label">
              <input type="radio" name="train-option" value="add-to-existing" checked> –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            </label>
            <label class="form-check-label ms-3">
              <input type="radio" name="train-option" value="create-new"> –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
            </label>
          </div>
          <div id="existing-question-dropdown" class="mt-3">
            <select class="form-select" id="question-select">
                <option>–í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</option>
            </select>
          </div>
          <div id="new-question-form" class="mt-3" style="display: none;">
            <input type="text" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å" />
          </div>
          <div class="mt-3 mb-3 w-100">
            <button id="train-btn" class="btn btn-success">–û–±—É—á–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
</div>
<script src="{% static 'chat_dashboard/js/train_message.js' %}"></script>
{% endblock %}